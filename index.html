<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Image Fetch and Swap</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
    <style>
        body {
            background-image: url('bg.png');
            background-repeat: no-repeat;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
            padding-left: 200px;
        }

        img {
            width: 100px;
            height: 140px;
            margin: 5px;
            cursor: pointer;
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        #main-cards img {
            margin: 5px;
        }

        .selected {
            transform: scale(1.1);
            border: 2px solid blue;
        }

        .faded {
            opacity: 0.5;
        }

        .bot-cards img {
            border-radius: 5%;
        }

        .bot-cards {
            margin-bottom: 50px;
            position: relative;
        }

        #card-image {
            margin-bottom: 50px;
        }

        .card-group img {
            position: absolute;
        }

        #imgd {
            transition: left 2s ease-in-out;
            position: relative; /* Ensure it's positioned relative to its container */
            left: 0; /* Initial position */
        }

        .slide-left {
            left: -300px; /* Move the image 300px to the left */
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 bot-cards">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
                <img src="./card-back.jpg" alt="">
            </div>
            <div class="col-4 card-group">
                <img src="./card-back.jpg" alt="" id="imgd" style="margin-left: 350px; z-index: 40;" onclick="giveCard()">
                <img src="./card-back.jpg" alt="" style="margin-left: 345px; z-index: 35;">
                <img src="./card-back.jpg" alt="" style="margin-left: 340px; z-index: 30;">
                <img src="./card-back.jpg" alt="" style="margin-left: 335px; z-index: 25;">
                <img src="./card-back.jpg" alt="" style="margin-left: 330px; z-index: 20;">
                <img src="./card-back.jpg" alt="" style="margin-left: 325px; z-index: 15;">
                <img src="./card-back.jpg" alt="" style="margin-left: 320px; z-index: 10;">
                <img src="./card-back.jpg" alt="" style="margin-left: 315px; z-index: 5;">
            </div>
            <div class="col-6">
                <div>
                    <img id="card-image" src="" alt="Card Image" style="margin-left: 20px;">
                </div>
            </div>
            <div class="col-12">
                <div id="main-cards">
                    <img id="card-image1" src="" alt="Card Image">
                    <img id="card-image2" src="" alt="Card Image">
                    <img id="card-image3" src="" alt="Card Image">
                    <img id="card-image4" src="" alt="Card Image">
                    <img id="card-image5" src="" alt="Card Image">
                    <img id="card-image6" src="" alt="Card Image">
                    <img id="card-image7" src="" alt="Card Image">
                    <img id="card-image8" src="" alt="Card Image">
                    <img id="card-image9" src="" alt="Card Image">
                    <img id="card-image10" src="" alt="Card Image">
                </div>
                <button id="fetch-card" class="btn btn-success">New Game</button>
            </div>
        </div>
    </div>

    <script>
        let firstCard = null;
        let secondCard = null;
        let cardsArray = []; // Array to store card details

        function handleCardClick(event) {
            const clickedCard = event.target;

            if (firstCard === null) {
                firstCard = clickedCard;
                firstCard.classList.add('selected');
            } else if (secondCard === null && clickedCard !== firstCard) {
                secondCard = clickedCard;
                secondCard.classList.add('selected');

                setTimeout(() => {
                    const tempSrc = firstCard.src;
                    firstCard.src = secondCard.src;
                    secondCard.src = tempSrc;

                    const firstCardIndex = parseInt(firstCard.id.replace('card-image', '')) - 1;
                    const secondCardIndex = parseInt(secondCard.id.replace('card-image', '')) - 1;

                    const tempCard = cardsArray[firstCardIndex];
                    cardsArray[firstCardIndex] = cardsArray[secondCardIndex];
                    cardsArray[secondCardIndex] = tempCard;

                    firstCard.classList.remove('selected');
                    secondCard.classList.remove('selected');
                    firstCard = null;
                    secondCard = null;

                    console.log(cardsArray);
                }, 300);
            }
        }

        async function fetchCards() {
            try {
                const response = await fetch('https://deckofcardsapi.com/api/deck/new/draw/?count=10');
                const data = await response.json();

                cardsArray = [];

                for (let i = 0; i < 10; i++) {
                    const card = data.cards[i];
                    const cardImageElement = document.getElementById(`card-image${i + 1}`);
                    cardImageElement.src = card.image;
                    cardImageElement.addEventListener('click', handleCardClick);

                    cardsArray.push({
                        value: card.value,
                        image: card.image,
                        suit: card.suit,
                        code: card.code
                    });
                }

                console.log(cardsArray);

            } catch (error) {
                console.error('Error fetching card images:', error);
            }
        }

        async function giveCard() {
            try {
                const response = await fetch('https://deckofcardsapi.com/api/deck/new/draw/?count=1');
                const data = await response.json();
                const card = data.cards[0];
                const cardImageElement = document.getElementById('card-image');
                cardImageElement.src = card.image;
                cardImageElement.addEventListener('click', handleCardClick);

                cardsArray.push({
                    value: card.value,
                    image: card.image,
                    suit: card.suit,
                    code: card.code
                });

                console.log(cardsArray);

            } catch (error) {
                console.error('Error fetching card images:', error);
            }
        }

        function slideImageLeft() {
            const imgd = document.getElementById('imgd');
            imgd.classList.add('slide-left');
        }

        // Automatically call functions when the page loads
        window.onload = () => {
            fetchCards();
            giveCard();
        };

        // Add event listeners to buttons
        document.getElementById('fetch-card').addEventListener('click', fetchCards);
        document.getElementById('imgd').addEventListener('click', slideImageLeft);
    </script>
</body>

</html>